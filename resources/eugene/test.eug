PartType promoter;
PartType terminator;
PartType cds;
PartType output;
PartType rbs;
PartType ribozyme;

cds BM3R1;
cds BetI;
cds HlyIIR;
cds PhlF;
cds SrpR;
output YFP;
promoter pBM3R1;
promoter pBetI;
promoter pHlyIIR;
promoter pPhlF;
promoter pSrpR;
promoter pTac;
promoter pTet;
rbs B3;
rbs E1;
rbs H1;
rbs P2;
rbs S2;
ribozyme RiboJ10;
ribozyme RiboJ51;
ribozyme RiboJ53;
ribozyme RiboJ57;
ribozyme SarJ;
terminator ECK120029600;
terminator ECK120033736;
terminator ECK120033737;
terminator L3S2P11;
terminator L3S3P11;

Device SrpR_device(
   promoter,
   promoter,
   RiboJ10,
   S2,
   SrpR,
   ECK120029600
);
Device PhlF_device(
   promoter,
   promoter,
   RiboJ53,
   P2,
   PhlF,
   ECK120033737
);
Device BetI_device(
   promoter,
   RiboJ57,
   E1,
   BetI,
   L3S3P11
);
Device HlyIIR_device(
   promoter,
   RiboJ51,
   H1,
   HlyIIR,
   ECK120033736
);
Device BM3R1_device(
   promoter,
   promoter,
   SarJ,
   B3,
   BM3R1,
   L3S2P11
);

Rule SrpR_rules ( ON SrpR_device:
   CONTAINS pBM3R1 AND
   CONTAINS pPhlF AND
   STARTSWITH pPhlF AND
   ALL_FORWARD
);
Rule PhlF_rules ( ON PhlF_device:
   CONTAINS pHlyIIR AND
   CONTAINS pBetI AND
   ALL_FORWARD
);
Rule BetI_rules ( ON BetI_device:
   CONTAINS pTet AND
   ALL_FORWARD
);
Rule HlyIIR_rules ( ON HlyIIR_device:
   CONTAINS pTac AND
   STARTSWITH pTac AND
   ALL_FORWARD
);
Rule BM3R1_rules ( ON BM3R1_device:
   CONTAINS pTac AND
   CONTAINS pTet AND
   STARTSWITH pTac AND
   ALL_FORWARD
);


SrpR_devices    = product(SrpR_device);
PhlF_devices    = product(PhlF_device);
BetI_devices    = product(BetI_device);
HlyIIR_devices  = product(HlyIIR_device);
BM3R1_devices   = product(BM3R1_device);

Device gate_SrpR();
Device gate_PhlF();
Device gate_BetI();
Device gate_HlyIIR();
Device gate_BM3R1();

Device circuit();

Rule allRules( ON circuit:
   gate_SrpR    EXACTLY 1 AND
   gate_PhlF    EXACTLY 1 AND
   gate_BetI    EXACTLY 1 AND
   gate_HlyIIR  EXACTLY 1 AND
   gate_BM3R1   EXACTLY 1 AND
   gate_PhlF BEFORE gate_SrpR AND
   gate_PhlF BEFORE gate_BM3R1 AND
   gate_PhlF BEFORE gate_BetI AND
   gate_PhlF BEFORE gate_HlyIIR AND
   gate_SrpR BEFORE gate_BM3R1 AND
   gate_SrpR BEFORE gate_BetI AND
   gate_SrpR BEFORE gate_HlyIIR AND
   gate_BM3R1 BEFORE gate_BetI AND
   gate_BM3R1 BEFORE gate_HlyIIR AND
   gate_BetI BEFORE gate_HlyIIR
);

Array allResults;

for(num i0=0;  i0<sizeof(SrpR_devices);    i0=i0+1) {
for(num i1=0;  i1<sizeof(PhlF_devices);    i1=i1+1) {
for(num i2=0;  i2<sizeof(BetI_devices);    i2=i2+1) {
for(num i3=0;  i3<sizeof(HlyIIR_devices);  i3=i3+1) {
for(num i4=0;  i4<sizeof(BM3R1_devices);   i4=i4+1) {

gate_SrpR    = SrpR_devices[i0];
gate_PhlF    = PhlF_devices[i1];
gate_BetI    = BetI_devices[i2];
gate_HlyIIR  = HlyIIR_devices[i3];
gate_BM3R1   = BM3R1_devices[i4];

Device circuit(
   gate_SrpR,
   gate_PhlF,
   gate_BetI,
   gate_HlyIIR,
   gate_BM3R1
);

result = permute(circuit);

allResults = allResults + result;

}
}
}
}
}