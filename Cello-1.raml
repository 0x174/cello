#%RAML 0.8
title: Cello
baseUri: www.cellocad.org
securitySchemes:
  - basic:
      type: Basic Authentication
      
/in_out:
  get:
    securedBy: [basic]
    description: Get list of input promoter and output gene filenames.
    responses:
      200:
        description: A list of filenames.
        body:
          application/json:
            example: |
              {
                "files" : ['input_pBAD.txt','input_pBM3R1.txt','input_pLuxStar.txt','input_pTac.txt','input_pTet.txt','output_BFP.txt','output_RFP.txt','output_YFP.txt']
              }
  /{filename}:
    get:
      securedBy: [basic]
      description: Get contents of file.
      responses:
        200:
          description: Column-separated text.  name, low REU, high REU, sequence
          body:
            text/plain:
              example: |
                pBAD 0.0082 2.5 ACTTTTCATACTCCCGCCATTCAGAGAAGAAACCAATTGTCCATATTGCATCAGACATTGCCGTCACTGCGTCTTTTACTGGCTCTTCTCGCTAACCAAACCGGTAACCCCGCTTATTAAAAGCATTCTGTAACAAAGCGGGACCAAAGCCATGACAAAAACGCGTAACAAAAGTGTCTATAATCACGGCAGAAAAGTCCACATTGATTATTTGCACGGCGTCACACTTTGCTATGCCATAGCATTTTTATCCATAAGATTAGCGGATCCTACCTGACGCTTTTTATCGCAACTCTCTACTGTTTCTCCATACCCGTTTTTTTGGGCTAGC              
    post:
      securedBy: [basic]
      description: Write a file with the specified text.
      responses:
        200:
          body:
      queryParameters:
        filetext:
          description: Contents to be written to file.
          type: string
          required: true
    delete:
      securedBy: [basic]
      description: Delete file.
      responses:
        200:
          body:
      
/netsynth:
  post:
    securedBy: [basic]
    description: Verilog to wiring diagram.  This is just to validate that the Verilog is valid.  It is not required to run Cello, and it also does not represent the final wiring diagram since the motif library for subgraph swapping optimization is not specified.
    queryParameters:
      verilog_text:
        description: File contents of a Verilog .v logic specification.
        type: string
        required: true
    responses:
      500:
        description: If the Verilog is not valid, errors within NetSynth result in a status 500 error.
        body:
          application/json:
            example: |
              {"timestamp":1450706258636,"status":500,"error":"Internal Server Error","exception":"java.lang.StringIndexOutOfBoundsException","message":"String index out of range: -1","path":"/netsynth"}
      200:
        body:
          application/json:
            example: |
              0  OUTPUT      (1)         
              1  NOR         (3,2)       
              2  NOT         (5)         
              3  NOT         (4)         
              4  INPUT                   
              5  INPUT      

/submit:
  post:
    securedBy: [basic]    
    description: Run Cello!
    responses:
      200:
        body:
          application/json:
            example: |
              SUCCESS: Loading results page.
    queryParameters:
      jobid:
        description: job name/identifier
        type: string
        required: true
      verilog:
        description: Verilog text (not filepath)
        type: string
        required: true
      inputs:
        description: Input promoter data.  Rows of space-separated name, low, high, dnaseq
        type: string
        required: true
        example: | 
          pTac 0.0034 2.8 AACGATCGTTGGCTGTGTTGACAATTAATCATCGGCTCGTATAATGTGTGGAATTGTGAGCGCTCACAATT
      outputs:
        description: Output gene data.  Rows of space-separated name, dnaseq (each dnaseq should concatenate ribozyme, rbs, cds, terminator)
        type: string
        required: true
        example: YFP CTGAAGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAAC
      user_options:
        description: custom flags, not intended for new users. Space + dash separated strings.
        type: string
        required: true
        example: |
          -figures false -plasmid false -assignment_algorithm hill_climbing
        
/results:
  get:
    securedBy: [basic]
    description: List of previous job names
    responses:
      200:
      
  /{jobid}:
    get:
      securedBy: [basic]
      description: List of files in job result folder
      queryParameters:
        keyword:
          description: "Filter by substring within the file name"
          required: false
          type: string
          example: "logic_circuit"
        extension:
          description: "Filter by file extension"
          required: false
          type: string
          example: ".txt"
    delete:
      securedBy: [basic]
      description: Delete previous job result
    /{filename}:
        get:
          description: Get file contents (text or png-bytes)

